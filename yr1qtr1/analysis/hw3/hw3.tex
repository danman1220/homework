%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Short Sectioned Assignment
% LaTeX Template
% Version 1.0 (5/5/12)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% Frits Wenneker (http://www.howtotex.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[fontsize=11pt]{scrartcl} % 11pt font size

\usepackage[T1]{fontenc} % Use 8-bit encoding that has 256 glyphs
\usepackage[english]{babel} % English language/hyphenation
\usepackage{amsmath,amsfonts,amsthm} % Math packages
\usepackage{mathrsfs}

\usepackage[margin=1in]{geometry}

\usepackage{sectsty} % Allows customizing section commands
\allsectionsfont{\centering \normalfont\scshape} % Make all sections centered, the default font and small caps

\usepackage{fancyhdr} % Custom headers and footers
\pagestyle{fancyplain} % Makes all pages in the document conform to the custom headers and footers
\fancyhead{} % No page header - if you want one, create it in the same way as the footers below
\fancyfoot[L]{} % Empty left footer
\fancyfoot[C]{} % Empty center footer
\fancyfoot[R]{\thepage} % Page numbering for right footer
\renewcommand{\headrulewidth}{0pt} % Remove header underlines
\renewcommand{\footrulewidth}{0pt} % Remove footer underlines
\setlength{\headheight}{13.6pt} % Customize the height of the header

\numberwithin{equation}{section} % Number equations within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)
\numberwithin{figure}{section} % Number figures within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)
\numberwithin{table}{section} % Number tables within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)

\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\C}{\mathbb{C}}

\newcommand{\sigalg}{$\sigma$-algebra}
\newcommand{\A}{\mathscr{A}}

\newtheorem*{lemma}{Lemma}
%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\newcommand{\horrule}[1]{\rule{\linewidth}{#1}} % Create horizontal rule command with 1 argument of height

\title{	
\normalfont \normalsize 
\textsc{Analysis} \\ [25pt] % Your university, school and/or department name(s)
\horrule{0.5pt} \\[0.4cm] % Thin top horizontal rule
\huge Problem Set 3\\ % The assignment title
\horrule{2pt} \\[0.5cm] % Thick bottom horizontal rule
}

\author{Daniel Halmrast} % Your name

\date{\normalsize\today} % Today's date or a custom date

\begin{document}

\maketitle % Print the title

%----------------------------------------------------------------------------------------
%	PROBLEM 1
%----------------------------------------------------------------------------------------
\section*{Problem 1}
\subsection*{Part 1}
Prove 1.18.ii from the notes.
\\
\begin{proof}
(Copied from homework 1)

Note that if the composite function $(f,g)$ is measurable, then this statement reduces to
part i, and the proof is complete.

So, let's prove that $(f,g)$ is measurable, given $f,g$ are each individually measurable.
(Note that this construction works for general products of measurable spaces, where the
product \sigalg is given by $\sigma(\mathscr{A}_1\times\mathscr{A}_2)$. Generally, this
says that the product measurable space has the universal property of product spaces).

Let $E,F\in B(\mathbb{R})$ be measurable sets, and consider the product $E\times F$. The
inverse image $(f,g)^{-1}(E\times F) = f^{-1}(E)\cap g^{-1}(F)$ is the intersection of
measurable sets (since $f$ and $g$ are both individually measurable), and is measurable.

Now, consider the ``good set''
\[
\mathscr{E} = \{G | G\in B(\mathbb{R}^2) \textrm{and } (f,g)^{-1}(G) \in \mathscr{A}\}
\]
It is clear from above that we have the inclusion relations
\[
B(\mathbb{R})\times B(\mathbb{R}) \subset \mathscr{E} \subset B(\mathbb{R}^2)
\]
Now, $\mathscr{E}$ is clearly a \sigalg, since both conditions on $\mathscr{E}$ preserve
complements and unions. Therefore, taking $\sigma$ of the inclusion relations yields:
\[
\begin{aligned}
\sigma(B(\mathbb{R})\times B(\mathbb{R})) &\subset \mathscr{E} &\subset B(\mathbb{R}^2)\\
\implies B(\mathbb{R}^2) &\subset \mathscr{E} &\subset B(\mathbb{R}^2)
\end{aligned}
\]

Thus, $\mathscr{E}$ is actually the whole Borel set $B(\mathbb{R}^2)$, and thus
$(f,g)$ is a measurable function, as desired.
\end{proof}

\subsection*{Part 2}
Complete 2.6 from the notes.

Describe all measurable functions $f:\N\to[0,\infty]$ that are finite $\mu_c$-almost everywhere in
the counting measure, and find
\[
\int_{\N} f d\mu_c
\]
\\
\begin{proof}
Note that the only subset of $\N$ with zero measure is $\emptyset$, so if $f$ is finite
$\mu_c$-almost everywhere, then $f$ is finite on all subsets of $\N$ i.e. $f$ is bounded.

Then, the integral becomes
\[
\int_{\N} f d\mu_c = \sum_{i=1}^{\infty} f_i
\]
This is clear to see by approximating $f$ with simple functions that converge monotonically
to $f$. Let 
\[
\phi_i = \sum_{j=1}^{i}f_j \chi_{\{j\}}
\]
It is clear that $\phi_{i+1}\geq\phi_i$, since $\phi_i(n) = \phi_{i+1}(n)$ for all $n<i$,
and for $n>i$, we have
\[
\begin{aligned}
\phi_i(n)&=0\\
        &\leq\phi_{i+1}(n)
\end{aligned}
\]
since $\phi_i > 0$ for all $i$ (definition of simple function).

It's also clear that $\phi_i\to f$ pointwise, since for fixed $x\in\N$, $\phi_{x+j}(x)=f(x)$
for all $j>0$.

Thus, the monotone convergence theorem tells us that
\[
\begin{aligned}
\lim_{i\to\infty}\int_{\N}\phi_i(x)d\mu_c(x) &= \int_{\N} \lim_{i\to\infty}\phi_i(x)d\mu_c(x)\\
\lim_{i\to\infty}\sum_{j=1}^{i}f_j \mu_c(\{j\}) &= \int_{\N} f(x) d\mu_c(x)\\
\sum_{j=1}^{\infty} f_j &= \int_{\N} f(x)d\mu_c(x)\\
\end{aligned}
\]
as desired.
\end{proof}

\subsection*{Part 3}
Do the same thing for the $\delta$-measure $\mu_{\delta_p}$ on $\Omega$.
\\
\begin{proof}
Note that any subset that does not contain $p$ has measure zero, Thus, $f$ is finite
$\mu_{\delta_c}$-almost everywhere if and only if $f(p)$ is finite. This is clear, since
$\Omega\setminus\{p\}$ has measure zero, so $f$ can do whatever it wants on $\Omega\setminus\{p\}$.
However, the measure of $\{p\}$ is not zero, so $f$ must be finite on $\{p\}$.

To compute the integral, we first observe the general fact that changing a function on
a set of measure zero does not change the integral.
\begin{lemma}
For measurable functions $f$ and $g$ from a measurable space $\Omega$ such that $f=g$ 
$\mu$-almost everywhere, $\int f = \int g$.
\end{lemma}
\begin{proof}
\[
\begin{aligned}
\int_{\Omega}fd\mu -\int_{\Omega}gd\mu  &= \int_{\Omega} (f - g)d\mu\\
                                &= \int_{\{x | f(x) = g(x)\}}(f-g)d\mu + \int_{\{x|f(x)\neq f(g)\}}(f-g)d\mu\\
                                &= \int_{\{x | f(x) = g(x)\}}(0)d\mu + 0\\
                                &= 0
\end{aligned}
\]
\end{proof}
Thus, we have that
\[
\int_{\Omega} fd\delta = \int_{\Omega}f(p)\chi_{\{p\}}d\delta
\]
and the second integral is the integral of a simple function, and is just $f(p)\delta(\{p\}) = f(p)$.
Thus,
\[
\int_{\Omega}fd\delta = f(p)
\]
\end{proof}

\subsection*{Part 4}
Show that the Dirichlet function is measurable, and calculate its integral.
\\
\begin{proof}
The Dirichlet function is defined as the characteristic function on $\Q$. To see this 
is measurable, observe that $\Q$ is measurable, since it is a countable disjoint union of
points, which are all measurable.

The integral can easily be seen to be zero, since
\[
\begin{aligned}
\mu(\Q) &= \mu\left(\bigcup_{q\in\Q} \{q\}\right)\\
        &= \sum_{q\in\Q}\mu(\{q\})\\
        &= 0
\end{aligned}
\]
So, by the lemma of the previous problem,
\[
\int_{\R} \chi_{\Q}d\mu = \int_{\R} 0 d\mu = 0
\]
\end{proof}

\subsection*{Part 5}
Construct a sequence of functions $\{f_n\}$ satisfying the assumptions of Fatou's lemma such that
\[
\lim\int f_n \neq \int\lim f_n
\]

\begin{proof}
Let $f_n = \chi_{[n,n+1]}$. Then, $\int_{\R}f_nd\mu = 1$ for all $n$, but $f_n(x)\to 0$ for
all $x$, so $f_n$ converges pointwise to zero, and thus
\[
\begin{aligned}
\lim_{n\to\infty}\int_{\R}f_nd\mu   &= 1\\
                                    &\neq 0\\
                                    &=\int_{\R}\lim_{n\to\infty}f_nd\mu
\end{aligned}
\]
\end{proof}
%----------------------------------------------------------------------------------------
%----------------------------------------------------------------------------------------
%	PROBLEM 2
%----------------------------------------------------------------------------------------
\section*{Problem 2}
\subsection*{Part a}
Prove that there exists constants $C_1(n), C_2(n)$ such that
\[
C_1(n)r^n \leq \lambda^n B_r \leq C_2(n)r^n
\]

\begin{proof}
To begin with, we note that the ($\infty$-norm) cube of radius $r$, defined as the set
\[
\{(x_1,\ldots,x_n)\in\R^n\ |\ |x_i| < r\ \forall i\}
\]
contains the ball $B_r$. Thus, the volume of the cube $V = (2r)^n$ is an upper
bound for the Lebesgue measure of $B_n$ (this follows from the monotonicity of the measure,
and the fact that the Lebesgue measure preserves the standard volume of boxes).

Note also that the ($1$-norm) cube of radius $r$, defined as the set
\[
\{(x_1\ldots,x_n)\ |\ \sum_{i=1}^n |x_i| < r\}
\]
is contained in the ball $B_r$. This is clear, since the furthest away from the origin
a point in the $1$-cube of radius $r$ can get is when exactly one coordinate is $r$
with the rest zero. Since this is contained in $B_r$, every other point is as well.

The volume of the $1$-cube of radius $r$ is a bit trickier to compute. We know
it looks like a cube with diagonal of length $2r$, which leads to a volume of
$V = (\frac{2r}{\sqrt{n}})^n$ which works as a lower bound for the Lebesgue measure
for $B_n$ by a dual argument to the one above.

Thus, we have
\[
\left(\frac{2}{\sqrt{n}}\right)^nr^n \leq \lambda^n B_n \leq (2)^nr^n
\]
so, $C_1(n) = \left(\frac{2}{\sqrt{n}}\right)^n$ and $C_2(n) = 2^n$ function
as the desired lower and upper bounds.
\end{proof}

\subsection*{Part b}
For $k=1,2,\ldots$ and a fixed $A\in(0,1)$, define $I_k = (k,k+\frac{A}{2^k})$.
Find
\[
\lambda^1\left(\bigcup_{k=1}^{\infty}I_k\right)
\]

\begin{proof}
To begin with, we note that each $I_k$ is disjoint from any other. This is clear, since
\[
\frac{A}{2^k} < 1\ \forall k
\]
so
\[
k+\frac{A}{2^k} < k+1\ \forall k
\]

Therefore, by $\sigma$-additivity of $\lambda^1$, we have
\[
\lambda^1\left(\bigcup_{k=1}^{\infty}I_k\right) = \sum_{k=1}^{\infty}\lambda^1(I_k)
\]
Now, by the definition of the Lebesgue measure, $\lambda^1((k,k+\frac{A}{2^k})) = k+\frac{A}{2^k} - k = \frac{A}{2^k}$.
So, the sum becomes
\[
\begin{aligned}
\sum_{k=1}^{\infty}\lambda^1(I_k)   &= \sum_{k=1}^{\infty}\frac{A}{2^k}\\
                                    &= A\sum_{k=1}^{\infty}\frac{1}{2^k}\\
                                    &= A
\end{aligned}
\]
Thus, 
\[
\lambda^1\left(\bigcup_{k=1}^{\infty}I_k\right) = A
\]
as desired.
\end{proof}

\subsection*{Part c}
Let $E\subset \R$ be compact with $|E|>0$. Prove that for any $\theta \in (0,1)$,
there exists some open interval $\Delta\subset \R$ such that
\[
|\Delta\cap E| \geq \theta |\Delta|
\]

\begin{proof}
Suppose for a contradiction that there existed some $\theta$ such that for all intervals
$\Delta$, the inequality
\[
|\Delta\cap E| < \theta |\Delta|
\]
held. In particular, let $\mathscr{O}$ be any open cover of $E$, and let $O$ be the union
of all $O\in\mathscr{O}$. Then, it is possible to write $O$ as a countable disjoint union of
open intervals
\[
O = \bigcup_{i=1}^{\infty} I_i
\]
Now, we have that
\[
\begin{aligned}
|E|         &= |O\cap E|
            &= |\bigcup_{i=1}^{\infty} (I_i\cap E)|\\
            &= \sum_{i=1}^{\infty} |I_i\cap E|\\
            &< \sum_{i=1}^{\infty} \theta|I_i|\\
            &= \theta\sum_{i=1}^{\infty}|I_i|\\
            &= \theta|O|
\end{aligned}
\]
Thus, $|E| < \theta|O|$ for $\theta\in(0,1)$ and any $O$ open containing $E$. Thus,
\[
|E| < \inf\{|O|\ |\ O\supset E \textrm{ open}\}
\]
But Borel-regularity says that
\[
|E| = \inf\{|O|\ |\ O\supset E \textrm{ open}\}
\]
which is a contradiction as desired.
\end{proof}
%----------------------------------------------------------------------------------------
%----------------------------------------------------------------------------------------
%	PROBLEM 3
%----------------------------------------------------------------------------------------
\section*{Problem 3}
For a measurable function $f:(\Omega,\A,\mu)\to\R$, with $\mu(\Omega)<\infty$, which
is finite $\mu$-almost everywhere, prove that
\[
\lim_{n\to\infty} \mu(\{|f|> n\}) = 0
\]

\begin{proof}
For this problem, let $I(n): \R^{+}\to [0,\mu(\Omega)]$ defined as $I(n) = \mu(\{|f|>n\})$.

Now, suppose for a contradiction that there existed a sequence $k_i\to\infty$ such that
$I(k_i)\to L$ for some $L\neq 0$. In particular, this would mean that any subsequence
of $k_i$ would converge to $L$ as well. So, let $\{k_{i_j}\}$ be a monotonically increasing
subsequence of $\{k_i\}$. In particular, note that $\{|f| > k_{i_j}\}\supset\{|f| > k_{i_{j+1}}\}$,
so the sequence of subsets being measured by $\mu$ is monotonic as well. In this case,
we can apply limit theorems to the measure to get that
\[
\begin{aligned}
\lim_{j\to\infty} \mu\{|f| > k_{i_j}\}) &= \mu\left(\lim_{j\to\infty} \{|f| > k_{i_j}\}\right)\\
                                        &= \mu(\{|f| = \infty\})\\
                                        &= 0
\end{aligned}
\]
Where the last line is from the fact that $f$ is finite almost everywhere.
However, $0\neq L$, which is a contradiction.

Thus, if $\{k_i\}$ is a sequence toward infinity such that $\{I(k_i)\}$ converges, it converges
to zero.

So, suppose for a contradiction that there exists a sequence $\{n_i\}$ such that $\{I(n_i)\}$
does not converge. In particular, this would imply that there is some neighborhood of zero $N_0$
such that there is a subsequence $\{n_{i_j}\}$ that is never in $N_0$. However,
since the target space $[0,\mu(\Omega)]$ is compact, such a subsequence must have a convergent
sub-subsequence. By the earlier observation, this sub-subsequence must converge to zero. But 
all of the subsequence $\{n_{i_j}\}$ avoids $N_0$ and thus any sub-subsequence cannot converge
to zero, a contradiction.

Thus, every sequence $k_i\to\infty$ defines a convergent sequence $I(k_i)$ that converges
to zero, so the limit 
\[
\lim_{n\to\infty} \mu(\{|f|> n\}) = 0
\]
as well.
\end{proof}
%----------------------------------------------------------------------------------------
%----------------------------------------------------------------------------------------
%	PROBLEM 4
%----------------------------------------------------------------------------------------
\section*{Problem 4}
Let $\{E_n\}$ be a sequence of measurable subsets of $\Omega$ with measure $\mu$, with
$\sum\mu(E_n) = S$. Find $\mu\left(\limsup E_n\right)$.
\\
\begin{proof}
We know that $\limsup E_n = \bigcap_{i=0}^{\infty}\left(\bigcup_{j=i}^{\infty}E_j\right)$. 
Now, consider the sequence $A_i$ such that 
\[
A_i = \bigcup_{j=i}^{\infty}E_i
\]
which is a monotonic sequence with limit
\[
\begin{aligned}
\lim_{i\to\infty}A_i    &= \bigcap_{i=1}^{\infty}A_i\\
                        &= \limsup E_n
\end{aligned}
\]
So,
\[
\begin{aligned}
\mu\left(\limsup E_n\right) &= \mu\left(\lim_{i\to\infty}A_i\right)\\
                            &= \lim_{i\to\infty}\mu(A_i)\\
\end{aligned}
\]
Now, we need to find out what $\mu(A_i)$ looks like.

Consider the fact that
\[
\begin{aligned}
\mu(A_i)    &= \mu\left(\bigcup_{j=i}^{\infty}E_j\right)\\
            &\leq \sum_{j=i}^{\infty}\mu(E_j)
\end{aligned}
\]
But since the sum $\sum_{n=1}^{\infty}E_n$ converges, its tails must approach zero.
Thus,
\[
\lim_{i=1}^{\infty}\sum_{j=i}^{\infty}\mu(E_j) \to 0
\]
so,
\[
\begin{aligned}
\mu\left(\limsup E_n\right) &= \lim_{i\to\infty}\mu(A_i)\\
                            &\leq \lim_{i\to\infty}\sum_{j=i}^{\infty}\mu(E_j)\\
                            &\to 0
\end{aligned}
\]

Thus, $\mu\left(\limsup E_n\right)= 0$.
\end{proof}
%----------------------------------------------------------------------------------------
%----------------------------------------------------------------------------------------
%	PROBLEM 5
%----------------------------------------------------------------------------------------
\section*{Problem 5}
Prove that any continuous function $f:\R\to\C$ is Borel-measurable.
\\
\begin{proof}
This was proved as a lemma in problem set 1. It is copied below.

\begin{lemma}
For $f:X\to Y$ continuous, $f$ is also measurable on the Borel \sigalg of $X$ and $Y$.
\end{lemma}
\begin{proof}
To see this, consider the ``good set''
\[
E = \{G | G\in B(Y) \textrm{and } f^{-1}(G)\in B(X)\}
\]
Clearly, $\mathscr{T}_Y \subset E$, since any open set in $Y$ is in $B(Y)$, and since
$f$ is continuous, the inverse image of an open set is open, and is in $B(X)$.
Note also that $E\subset B(Y)$ by construction.

Now, $E$ is also a \sigalg. To see this, note that it is closed under complements and
unions, since both $B(Y)$ and the inverse image respect these operations.

So, this leads to the following relation:
\[
\sigma(\mathscr{T}_Y) \subset \sigma(E) \subset \sigma(B(Y))
\]
which simplifies to
\[
B(Y) \subset E \subset B(Y)
\]
That is, $E = B(Y)$. In words, each measurable set in $Y$ has an inverse image under $f$
that is measurable. Thus, $f$ is measurable.
\end{proof}

Thus, since $f$ is continuous, it is Borel-measurable as desired.
\end{proof}
%----------------------------------------------------------------------------------------
%----------------------------------------------------------------------------------------
%	PROBLEM 6
%----------------------------------------------------------------------------------------
\section*{Problem 6}
Find
\[
\int_{[0,1]}\frac{1}{x}d\lambda^1(x)
\]
Without using Riemann integration theory.
\\
\begin{proof}
We will show that the integral diverges to infinity.

To do so, let's construct simple functions under $\frac{1}{x}$ such that their integral
grows without bound.

Let's use the construction of the monotonic increasing sequence of simple functions
approaching $f$ using dyadic intervals.

We have
\[
\phi_N = \sum_{k=2^N+1}^{N2^N} \frac{k-1}{2^N}\chi_{E_k^{(N)}} + N\chi_{\{f \geq N\}}
\]
with $E_k^{(N)} = f^{-1}(\Delta_k^{(N)})$.

Now, we know that $\{f\geq N\} = [0,\frac{1}{N}]$ and that
$E_k^{(N)} = [\frac{2^N}{k},\frac{2^N}{k-1}]$.
Thus,
\[
\begin{aligned}
\int_{[0,1]}\phi_N(x)d\lambda(x)  &= \sum_{k=2^N+1}^{N2^N} \frac{k-1}{2^N}\mu(E_k^{(N)}) + N\mu(\{f \geq N\})\\
                                &= \sum_{k=2^N+1}^{N2^N} \frac{k-1}{2^N}\left(\frac{2^N}{k-1}-\frac{2^N}{k}\right) + N\frac{1}{N}\\
                                &= \sum_{k=2^N+1}^{N2^N} \left(1 - \frac{k-1}{k}\right) + 1\\
                                &= \sum_{k=2^N+1}^{N2^N} \left(\frac{1}{k} + 1\right)
\end{aligned}
\]
which clearly diverges in the limit.
Thus, the simple functions below $f$ have unbounded integral, so $f$ must as well.
\end{proof}
%----------------------------------------------------------------------------------------
\end{document}
